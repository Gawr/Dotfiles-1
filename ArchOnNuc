
#Install Arch
#(http://gloriouseggroll.tv/?p=56)
loadkeys fr #Keyboard in fr
ping -c 3 www.google.com #Check if internet is ok
efivar -l #Check if efi mode
lsblk #Show drivers
gdisk /dev/sda -> x -> z -> Y -> Y #Partition table
cgdisk -> /dev/sda
512MiB -> EF00 -> "Linux Boot"
4GiB > 8200 -> "Linux Swap"
All -> 8300 -> "Arch Linux"
lsblk #Check if partition are ok
mkfs.fat -F32 /dev/sda1
mkswap /dev/sda2
swapon /dev/sda2
free -m #Check if swap is active
mkfs.ext4 /dev/sda3
mount /dev/sda3 /mnt
mkdir /mnt/boot
mkdir /mnt/home
mount /dev/sda1 /mnt/boot
mount /dev/sda3 /mnt/home
cp /etc/pacman.d/mirrorlist /etc/pacman.d/mirrorlist.backup
sed -i ‘s/^#Server/Server/’ /etc/pacman.d/mirrorlist.backup
rankmirrors -n 6 /etc/pacman.d/mirrorlist.backup > /etc/pacman.d/mirrorlist
pacstrap -i /mnt base base-devel vim
genfstab -U -p /mnt >> /mnt/etc/fstab
nano /mnt/etc/fstab -> "/dev/sda2 none swap defaults,discard 0 0" #EFI
arch-chroot /mnt
nano /etc/locale.gen -> uncomment en_US.UTF-8
locale-gen
echo LANG=en_US.UTF-8 > /etc/locale.conf
export LANG=en_US.UTF-8
ln -s /usr/share/zoneinfo/Europe/Paris > /etc/localtime
hwclock --systohc --utc
echo dude > /etc/hostname
nano /etc/pacman.conf
-> uncomment : [multilib] & Include...
-> add :
     [archlinuxfr]
     SigLevel = Never
     Server = http://repo.archlinux.fr/$arch
pacman -Sy
pacman -S yaourt vim bash-completion intel-ucode
passwd
useradd -m -g users -G wheel,storage,power -s /bin/bash gawk
passwd gawk
EDITOR=nano visudo
-> uncomment/add :
     %wheel ALL=(ALL) ALL
     Defaults rootpw
mount -t efivarfs efivarfs /sys/firmware/efi/efivars #Check if efi mounted
bootctl install
nano /boot/loader/entries/arch.conf #Empty file
     title Arch Linux
     linux /vmlinuz-linux
     initrd /intel-ucode.img #broadwell
     initrd /initramfs-linux.img
     options root=/dev/sda3 rw
exit
umount -R /mnt
reboot

#Wired
ip link #See internet possible connection
sudo systemctl enable dhcpcd@enp3s0.service #enp3s0 is the name of my wired connection
sudo systemctl start dhcpcd@enp3s0.service

#Software
sudo pacman -Syu #Upgrading whole system
sudo pacman -S xf86-video-intel mesa #Video dirvers
sudo pacman -S xorg-server xorg-server-utils xorg-xinit #Xorg
sudo pacman -S alsa-utils #Sound
sudo pacman -S cifs-utils #Freebox
sudo pacman -S ruby python2 #Code
sudo pacman -S mutt #Mail
sudo pacman -S firefox mpv ranger vim-plugins wget feh zip unzip redshift htop slim termite scrot chromium upower openssh gimp inkscape xsel rsync ntfs-3g fuse-exfat gconf
yaourt -S i3-gaps-next-git phallus-fonts-git concalc lemonbar-git dmenu2 xprintidle#everytime he ask for editing, write "no"/"n" if not write "yes"/"y"

#Sound
touch .asoundrc
nano .asoundrc
     defaults.pcm.card 0
     defaults.pcm.device 3
     defaults.ctl.card 0

#Vim setup 
sudo nano /etc/vimrc #add this at the end of the file
     set number
     filetype plugin on
     syntax on

#Bluetooth
sudo pacman bluez bluez-utils
sudo systemctl enable bluetooth.service
sudo systemctl start bluetooth.service
sudo hciconfig hci0 up #Without that bluetoothwtl won't work
bluetoothctl
sudo nano /etc/udev/rules.d/10-local.rules: #Start bluetooth everytime
  #Set bluetooth power up 
  ACTION=="add", KERNEL=="hci0", RUN+="/usr/bin/hciconfig hci0 up"

#Usb key mount
sudo mkdir /mnt/usbstick

#Sound
alsamixer
touch .asoundrc       
vim .asoundrc    
     defaults.pcm.card 0
     defaults.pcm.device 3
     defaults.ctl.card 0 
     
#Config
#From a key
sudo mount -o gid=users,fmask=113,dmask=002 /dev/sdb1 /mnt/usbstick/
#From the git
cd
git clone Https://github.com/Mattudw/Dotfiles.git
#And install the config
sudo rm -R .bashrc
mv Dotfiles/* ~/
mv Dotfiles/.* ~/ #if they ask something write "no"
mkdir pics
mkdir downl
rm -R Dotfiles
cd pics
wget http://78.194.40.123/uploads/big/76621f9f3730961f2b630a6d3ef38b62.png
sudo reboot

#Firefox
extension firefox :
  stylish
  custom new tab
  ghostery
  HTTPS everywhere
  lastpass
  ublock origin
  CTR
# file:///home/gawk/.config/firefox/page/index.html

#Login manager
sudo systemctl enable slim.service
sudo nano /etc/slim.conf
cd /usr/share/slim/themes/
sudo git clone https://github.com/naglis/slim-minimal.git

#Ssh
sudo pacman -S openssh
sudo systemctl enable sshd.service
sudo systemctl start sshd.service
#hostname -i #if you want to know your local ip

#Syncthing
sudo pacman -S syncthing
#http://docs.syncthing.net/users/autostart.html#using-systemd
sudo systemctl enable syncthing@gawk.service
sudo systemctl start syncthing@gawk.service
