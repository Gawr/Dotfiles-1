#Install Arch
#(http://gloriouseggroll.tv/?p=56)
loadkeys fr #Keyboard in fr
ping -c 3 www.google.com #Check if internet is ok
efivar -l #Check if efi mode
lsblk #Show drivers
gdisk /dev/sda -> x -> z -> Y -> Y #Partition table
cgdisk -> /dev/sda
512MiB -> EF00 -> "Linux Boot"
4GiB > 8200 -> "Linux Swap"
All -> 8300 -> "Arch Linux"
lsblk #Check if partition are ok
mkfs.fat -F32 /dev/sda1
mkswap /dev/sda2
swapon /dev/sda2
free -m #Check if swap is active
mkfs.ext4 /dev/sda3
mount /dev/sda3 /mnt
mkdir /mnt/boot
mkdir /mnt/home
mount /dev/sda1 /mnt/boot
mount /dev/sda3 /mnt/home
cp /etc/pacman.d/mirrorlist /etc/pacman.d/mirrorlist.backup
sed -i ‘s/^#Server/Server/’ /etc/pacman.d/mirrorlist.backup
rankmirrors -n 6 /etc/pacman.d/mirrorlist.backup > /etc/pacman.d/mirrorlist
pacstrap -i /mnt base base-devel vim
genfstab -U -p /mnt >> /mnt/etc/fstab
nano /mnt/etc/fstab -> "/dev/sda2 none swap defaults,discard 0 0" #EFI
arch-chroot /mnt
nano /etc/locale.gen -> uncomment en_US.UTF-8
locale-gen
echo LANG=en_US.UTF-8 > /etc/locale.conf
export LANG=en_US.UTF-8
ln -s /usr/share/zoneinfo/Europe/Paris > /etc/localtime
hwclock --systohc --utc
echo dude > /etc/hostname
nano /etc/pacman.conf
-> uncomment : [multilib] & Include...
-> add :
     [archlinuxfr]
     SigLevel = Never
     Server = http://repo.archlinux.fr/$arch
pacman -Sy
pacman -S yaourt vim bash-completion intel-ucode
passwd
useradd -m -g users -G wheel,storage,power -s /bin/bash gawk
passwd gawk
EDITOR=nano visudo
-> uncomment/add :
     %wheel ALL=(ALL) ALL
     Defaults rootpw
mount -t efivarfs efivarfs /sys/firmware/efi/efivars #Check if efi mounted
bootctl install
nano /boot/loader/entries/arch.conf (empty):
     title Arch Linux
     linux /vmlinuz-linux
     initrd /intel-ucode.img #broadwell
     initrd /initramfs-linux.img
     options root=/dev/sda3 rw
exit
umount -R /mnt
reboot

#Wired
ip link #See internet possible connection
sudo systemctl enable dhcpcd@enp3s0.service #enp3s0 is the name of my wired connection
sudo systemctl start dhcpcd@enp3s0.service

yaourt -S phc-intel
sudo phc-intel setup
sudo systemctl enable dkms-phc-intel
